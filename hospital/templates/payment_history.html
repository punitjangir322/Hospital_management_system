{% extends "base.html" %}
{% block content %}

<style>
.container{
    max-width:1000px;
    margin:30px auto;
    background:#fff;
    padding:25px;
    border-radius:8px;
    box-shadow:0 0 10px rgba(0,0,0,0.1);
}
h2{
    text-align:center;
    margin-bottom:25px;
    color:#1e3c72;
}
.patient-info{
    margin-bottom:25px;
}
.patient-info .row{
    display:flex;
    gap:20px;
    margin-bottom:10px;
}
.patient-info .col{
    flex:1;
}
label{
    font-weight:bold;
}
table{
    width:100%;
    border-collapse:collapse;
}
th, td{
    padding:12px;
    border:1px solid #ddd;
    text-align:center;
}
th{
    background:#2a5298;
    color:white;
}
.badge{
    padding:5px 10px;
    border-radius:4px;
    color:white;
    font-size:13px;
}
.paid{
    background:green;
}
.pending{
    background:orange;
}
.btn{
    background:#2a5298;
    color:white;
    padding:6px 12px;
    border-radius:4px;
    text-decoration:none;
    font-size:13px;
}
.btn:hover{
    background:#1e3c72;
}
</style>

<div class="container">

<h2>Patient Payment History</h2>

<!-- ================= PATIENT DETAILS ================= -->
<div class="patient-info">
    <div class="row">
        <div class="col"><label>Patient ID:</label> {{ patient.id }}</div>
        <div class="col"><label>Name:</label> {{ patient.name }}</div>
    </div>
    <div class="row">
        <div class="col"><label>Age:</label> {{ patient.age }}</div>
        <div class="col"><label>Gender:</label> {{ patient.gender }}</div>
    </div>
</div>

<!-- ================= PAYMENT TABLE ================= -->
<table>
<thead>
<tr>
    <th>Date</th>
    <th>Reason</th>
    <th>Total</th>
    <th>Paid</th>
    <th>Remaining</th>
    <th>Method</th>
    <th>Action</th>
</tr>
</thead>

<tbody>
{% for payment in payments %}
<tr>
    <td>{{ payment.payment_date }}</td>
    <td>{{ payment.reason }}</td>
    <td>{{ payment.total_payment }}</td>
    <td>{{ payment.paid_payment }}</td>
    <td>{{ payment.remaining_payment }}</td>
    <td>{{ payment.payment_method }}</td>
    <td>
        <a href="{% url 'payment-edit' payment.id %}" class="btn">
            Edit
        </a>
    </td>
</tr>
{% empty %}
<tr>
    <td colspan="7">No payment records found</td>
</tr>
{% endfor %}
</tbody>
</table>

</div>

{% endblock %}
