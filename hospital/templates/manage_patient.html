{% extends "base.html" %}
{% block title %}My Patients{% endblock %}
{% block content %}

<style>
.table-box {
    background: #fff;
    padding: 20px;
    border-radius: 8px;
}

.heading {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.search-input {
    padding: 8px 14px;
    width: 260px;
    border-radius: 6px;
    border: 1px solid #ccc;
    font-size: 14px;
}

table {
    width: 100%;
    border-collapse: collapse;
}

th, td {
    padding: 10px;
    border: 1px solid #ddd;
    text-align: center;
}

th {
    background: #2c3e50;
    color: #fff;
}

.btn {
    padding: 7px 14px;
    background: #3498db;
    color: white;
    border-radius: 6px;
    text-decoration: none;
    font-size: 14px;
}

.btn.history {
    background: #2ecc71;
}

.back-btn {
    padding: 6px 15px;
    border-radius: 10px;
    cursor: pointer;
    border: none;
}
</style>

<div class="table-box">
    <div class="heading">
        <h2>My Patients</h2>

        <form method="get">
            <input
                type="text"
                name="search"
                class="search-input"
                placeholder="Search by name or mobile"
                value="{{ search }}"
            >
        </form>

        <button class="back-btn" onclick="window.history.back()">‚Üê Back</button>
    </div>

    <table>
        <thead>
            <tr>
                <th>S.No</th>
                <th>Patient Name</th>
                <th>Age</th>
                <th>Mobile</th>
                <th>Actions</th>
            </tr>
        </thead>

        <tbody>
            {% for patient in patients %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ patient.name }}</td>
                <td>{{ patient.age }}</td>
                <td>{{ patient.admin.username }}</td>
                <td>
                    <a href="{% url 'create-meeting' patient.id %}" class="btn">Create Meeting</a>
                    <a href="{% url 'visiting-history' patient.id %}" class="btn history">Visiting History</a>
                    <a href="{% url 'payment-history' patient.id %}" class="btn">Payment History</a>
                    <a href="{% url 'all-prescription' patient.id %}" class="btn history">All Prescription</a>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5">No patients found</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}
