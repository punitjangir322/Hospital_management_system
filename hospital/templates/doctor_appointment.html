{% extends "base.html" %}
{% block title %}Doctor Appointments{% endblock %}

{% block content %}

<!-- Font Awesome -->
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
/>

<style>
.container {
    background: #fff;
    padding: 25px;
    border-radius: 10px;
}

.header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 25px;
}

.back-btn {
    padding: 6px 15px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    background: #eee;
}

.back-btn:hover {
    background: #ddd;
}

.doctor-info {
    background: #f4f6f8;
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 20px;
}

.doctor-info p {
    margin: 6px 0;
    font-size: 14px;
}

table {
    width: 100%;
    border-collapse: collapse;
}

th, td {
    padding: 10px;
    border: 1px solid #ddd;
    text-align: center;
    font-size: 14px;
}

th {
    background: #2c3e50;
    color: #fff;
}

.status {
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: bold;
}

.status.completed {
    background: #2ecc71;
    color: #fff;
}

.status.pending {
    background: #f1c40f;
    color: #fff;
}

.status.cancelled {
    background: #e74c3c;
    color: #fff;
}

</style>

<div class="container">

    <div class="header">
        <h2>Doctor Appointments</h2>
        <button class="back-btn" onclick="window.history.back();">
            ← Back
        </button>
    </div>

    <!-- ✅ Doctor Details -->
    <div class="doctor-info">
        <p><strong>Doctor:</strong> Dr. {{ doctor.name }}</p>
        <p><strong>Department:</strong> {{ doctor.specialization }}</p>
        <p><strong>Hospital:</strong> {{ doctor.hospital.name }}</p>
    </div>

    <!-- ✅ Appointment Table -->
    <table>
        <thead>
            <tr>
                <th>S.No</th>
                <th>Patient Name</th>
                <th>Age</th>
                <th>Visit Date</th>
                <th>Reason</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>

        {% for appointment in appointments %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ appointment.patient.name }}</td>
                <td>{{ appointment.patient.age }}</td>
                <td>{{ appointment.appointment_date }}</td>
                <td>{{ appointment.reason }}</td>
                <td>
                   {{appointment.status}}
                </td>
            </tr>
        {% empty %}
            <tr>
                <td colspan="6">No appointments found</td>
            </tr>
        {% endfor %}

        </tbody>
    </table>

</div>

{% endblock %}
